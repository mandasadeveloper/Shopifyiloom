{% assign productEvent = product.metafields.custom.product_launch_event.value %}

{% liquid
  assign now = 'now' | date: '%Y-%m-%dT%H:%M'
%}

{% if productEvent.start_date <= now %}
  <div class="il-eventStart">
    <a href="{{ section.settings.link }}" class="il-eventStart__linkText"></a>
    <div class="il-eventStart__container">
      <div class="il-eventStart__contentWrap">
        <h3 class="il-eventStart__heading text-p text-p--24">
          {{ section.settings.heading }}
        </h3>
        <a href="{{ section.settings.link }}" class="il-eventStart__link text-p text-p--16">
          {{ section.settings.link_text }}
        </a>
      </div>
    </div>
  </div>

  <style>
    .il-eventStart {
      background: url({{ section.settings.background_image_desktop | img_url: 'master' }}) no-repeat;
      background-size: cover;
      width: 100%;
      max-width: 1220px;
      margin: 60px auto 60px;
      height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .il-eventStart:after {
      content: '';
      background: rgba(0, 0, 0, 0.24);
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      right: 0;
      z-index: 0;
      left: 0;
    }

    .il-eventStart__contentWrap {
      width: 100%;
      z-index: 1;
      position: relative;
    }

    .il-eventStart__heading {
      color: var(--color-white);
      font-style: normal;
      font-weight: var(--font-weight-500);
      line-height: normal;
      letter-spacing: -0.96px;
      width: 100%;
      max-width: 300px;
      margin: 0 auto;
      text-align: center;
      font-family: var(--font-primary);
      margin-bottom: 48px;
    }

    .il-eventStart__link {
      background: var(--color-white);
      width: 100%;
      display: block;
      position: relative;
      border-radius: 10px;
      padding: 21px 24px 21px 56px;
      color: var(--color-primary);
      max-width: 450px;
      margin: 0 auto;
    }

    .il-eventStart__container {
      width: 100%;
    }

    .il-eventStart__link:before {
      content: '';  
      background: url({{ 'LINE_LOGO.png' | file_img_url }}) no-repeat;
      background-size: contain;
      width: 100%;
      max-width: 24px;
      height: 24px;
      position: absolute;
      left: 24px;
    }

    .il-eventStart__link:after {
      content: ''; 
      background: url({{ 'arrow-right_34cdbbee-3f04-49c2-9b79-445870ed839c.png' | file_img_url }}) no-repeat;
      background-size: contain;
      width: 100%;
      max-width: 32px;
      height: 32px;
      position: absolute;
      right: 24px;
      top: 19px;
    }

    .il-eventStart__linkText {
      position: absolute;
      width: 100%;
      height: 100%;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      z-index: 1;
    }

    @media (max-width: 641px) {
      .il-eventStart {
        background: url({{ section.settings.background_image_mobile | img_url: 'master' }}) no-repeat;
        background-size: cover;
        padding: 0 15px;
        margin: 40px auto;
      }

      .il-eventStart__link {
        padding: 18px 24px 18px 56px;
      }

      .il-eventStart__link:after {
        top: 14px;
      }
    }
  </style>
{% endif %}

{% schema %}
{
  "name": "Event Start Banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image_desktop",
      "label": "Desktop Background Image"
    },
    {
      "type": "image_picker",
      "id": "background_image_mobile",
      "label": "Mobile Background Image"
    },
    {
      "type": "textarea",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link"
    }
  ],
  "presets": [
    {
      "name": "Event Start Banner"
    }
  ]
}
{% endschema %}
